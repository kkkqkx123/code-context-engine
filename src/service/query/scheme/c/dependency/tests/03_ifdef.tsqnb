{"cells":[{"code":"#if TEST\r\n#define TEST\r\n#else \r\n#define DEV\r\n#endif \r\n\r\n#ifdef TEST\r\n#define TEST\r\n#endif\r\n\r\n#ifdef TEST\r\n","language":"cpp","kind":"code"},{"code":"; 1. 捕获 #if 或 #ifdef 块内部直接定义的宏\r\n; 匹配结构: #if TEST -> #define TEST\r\n(preproc_if\r\n  condition: (identifier) @condition_name\r\n  (preproc_def\r\n    name: (identifier) @def_name\r\n    value: (_)? @def_value) @def_node) @if_scope\r\n\r\n(preproc_ifdef\r\n  name: (identifier) @condition_name\r\n  (preproc_def\r\n    name: (identifier) @def_name\r\n    value: (_)? @def_value) @def_node) @ifdef_scope\r\n\r\n; 2. 捕获 #else 块内部定义的宏\r\n; 匹配结构: #else -> #define DEV\r\n; 注意：#else 的上下文（属于哪个 if）可以通过 @else_scope 的位置或父节点推断\r\n(preproc_else\r\n  (preproc_def\r\n    name: (identifier) @def_name\r\n    value: (_)? @def_value) @def_node) @else_scope\r\n\r\n; 3. 捕获 #elif 块（如果代码中有，逻辑同 #if）\r\n(preproc_elif\r\n  condition: (identifier) @condition_name\r\n  (preproc_def\r\n    name: (identifier) @def_name\r\n    value: (_)? @def_value) @def_node) @elif_scope\r\n","language":"scm","kind":"code"}]}